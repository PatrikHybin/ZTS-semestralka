*** Settings ***
Documentation                                      This is a registration test
Library                                            SeleniumLibrary

*** Variables ***
${url}            https://www.alza.sk
${browser}        chrome
${login}         xpath=//*[@id="lblLogin"]
${loginFrame}   loginIframe

${registration}     //*[@class="registration-link"]
${nameBox}    xpath=//*[@id="edth1EmailLogin"]
${passwordBox}     xpath=//*[@id="edth1Password"]
${passwordConfirmBox}     xpath=//*[@id="edth1PasswordConfirm"]
${phoneBox}     xpath=//*[@id="ctl00_ctl00_cpcm_cpc_ud2_phoneCountryBasicPhoneValidator_inpTelNumber"]

${inputUsedName}    pato1913
${inputUsedMail}    atlas.sk
${inputUsedPass}    12345678
${inputUsedPhone}   0949319384

${inputNewName}  fero
${inputNewMail}  google.sk
${inputNewPass}  12345678
${inputInvalidPhone}   1234

${inputWrongFormat}  pato@atlas@.sk

*** Test Cases ***
User fills in the registration with already used email and password
    open browser                                    ${URL}    ${browser}
    maximize browser window
    click element       ${login}
    sleep  1s
    select frame  ${loginFrame}
    Wait Until Page Contains Element      ${registration}
    click element        ${registration}
    Wait Until Element Is Visible   xpath=//*[@id="orderpage"]/div[2]/div[2]/a/span[1]
    Clear Element Text  ${nameBox}
    click element   ${nameBox}
    sleep  1s
    input text      ${nameBox}     ${inputUsedName}    False
    sleep  1s
    click element   ${passwordBox}
    input text      ${nameBox}     ${inputUsedMail}    False
    input text      ${passwordBox}              ${inputUsedPass}
    input text      ${passwordConfirmBox}       ${inputUsedPass}
    input text      ${phoneBox}                 ${inputUsedPhone}
    click element       //*[@id="orderpage"]/div[2]/div[2]/a
    Page Should Contain         Email je už využívaný.
    close browser


User fills in the registration with new email and password but with New phone number
    open browser                                    ${URL}    ${browser}
    maximize browser window
    click element       ${login}
    sleep  1s
    select frame  ${loginFrame}
    Wait Until Page Contains Element      ${registration}
    click element        ${registration}
    Wait Until Element Is Visible   xpath=//*[@id="orderpage"]/div[2]/div[2]/a/span[1]
    Clear Element Text  ${nameBox}
    click element   ${nameBox}
    sleep  1s
    input text      ${nameBox}     ${inputNewName}    False
    sleep  1s
    click element   ${passwordBox}
    input text      ${nameBox}     ${inputNewMail}    False
    input text      ${passwordBox}              ${inputNewPass}
    input text      ${passwordConfirmBox}       ${inputNewPass}
    input text      ${phoneBox}                 ${inputInvalidPhone}
    click element       //*[@id="orderpage"]/div[2]/div[2]/a
    Page Should Contain         Zadaný telefón je príliš krátky.
    close browser

User fills in the registration wrong email format
    open browser                                    ${URL}    ${browser}
    maximize browser window
    click element       ${login}
    sleep  1s
    select frame  ${loginFrame}
    Wait Until Page Contains Element      ${registration}
    click element        ${registration}
    Wait Until Element Is Visible   xpath=//*[@id="orderpage"]/div[2]/div[2]/a/span[1]
    input text      ${nameBox}                  ${inputWrongFormat}    True
    input text      ${passwordBox}              ${inputNewPass}
    input text      ${passwordConfirmBox}       ${inputNewPass}
    input text      ${phoneBox}                 ${inputUsedPhone}
    click element       //*[@id="orderpage"]/div[2]/div[2]/a
    Page Should Contain         Nesprávny formát emailu
    close browser



